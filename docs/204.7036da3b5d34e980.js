"use strict";(self.webpackChunksquadonlyadmin=self.webpackChunksquadonlyadmin||[]).push([[204],{4204:(b,h,s)=>{s.r(h),s.d(h,{LoginModule:()=>n});var c=s(6814),m=s(2414),i=s(6223),e=s(9468),d=s(632),C=s(6257);const f=function(o){return{error_bg:o}},p=function(o){return{"button--loading":o}},l=[{path:"",component:(()=>{class o{constructor(u,t,r){this.fb=u,this.API=t,this.CF=r}ngOnInit(){this.submitted=this.success=!1,this.Form=this.fb.group({username:["",[i.kI.required]],password:["",[i.kI.required]]}),location.host.includes("localhost")&&this.Form.patchValue({username:"mobileuser",password:"squadonly"})}submit(){if(this.submitted=!0,!this.Form.invalid){this.success=!0;const{username:u,password:t}=this.Form.value;setTimeout(()=>{this.API.Login(u,t).then(r=>{if(r.status)return this.CF.SetLS$(this.CF.TokenUser,JSON.stringify(this.CF.Encrypt(r.data,this.CF.TokenUser))),this.Form.reset(),this.CF.GotoURL("/dashboard"),void(this.submitted=!1);this.submitted=this.success=!1,this.CF.SwalError(r.error,"Error!")}).catch(r=>{console.log(r),this.submitted=this.success=!1,this.CF.SwalError("Something went wrong, Please try again")})})}}static#t=this.\u0275fac=function(t){return new(t||o)(e.Y36(i.qu),e.Y36(d.K),e.Y36(C.v))};static#e=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-login"]],decls:30,vars:11,consts:[["id","login"],[1,"container-fluid","ps-md-0"],[1,"row","g-0"],[1,"d-none","d-md-flex","col-md-4","col-lg-8","bg-image"],[1,"col-md-8","col-lg-4"],[1,"login","d-flex","align-items-center","py-5"],[1,"container"],[1,"row"],[1,"col-md-12","mx-auto",2,"max-width","420px"],[1,"card","border-1","border-primary","bg-dark","bg-opacity-25","shadow"],[1,"card-header","border-0"],[1,"text-center","my-3",2,"cursor","pointer",3,"routerLink"],["src","/assets/images/png/text-logo.png","alt","",1,"img-fluid","my-2",2,"max-width","250px"],[1,"text-white"],[1,"card-body"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"form-floating","mb-3"],["type","text","id","floatingInput","autofocus","","formControlName","username","placeholder","",1,"form-control",3,"ngClass"],["for","floatingInput",1,"required"],["type","password","id","floatingPassword","formControlName","password","placeholder","",1,"form-control",3,"ngClass"],["for","floatingPassword",1,"required"],[1,"d-grid","mb-4"],["type","submit",1,"btn","btn-primary","btn-lg","text-white","px-5",3,"ngClass"]],template:function(t,r){1&t&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2),e._UZ(3,"div",3),e.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11),e._UZ(12,"img",12),e.TgZ(13,"h6",13)(14,"small"),e._uU(15,"Please login for an account."),e.qZA()()()(),e.TgZ(16,"div",14)(17,"form",15),e.NdJ("ngSubmit",function(){return r.submit()}),e.TgZ(18,"div",16),e._UZ(19,"input",17),e.TgZ(20,"label",18),e._uU(21,"Username"),e.qZA()(),e.TgZ(22,"div",16),e._UZ(23,"input",19),e.TgZ(24,"label",20),e._uU(25,"Password"),e.qZA()(),e.TgZ(26,"div",21)(27,"button",22)(28,"span"),e._uU(29,"LOGIN"),e.qZA()()()()()()()()()()()()()()),2&t&&(e.xp6(11),e.Q6J("routerLink","/"),e.xp6(6),e.Q6J("formGroup",r.Form),e.xp6(2),e.Q6J("ngClass",e.VKq(5,f,r.submitted&&r.Form.get("username").hasError("required"))),e.xp6(4),e.Q6J("ngClass",e.VKq(7,f,r.submitted&&r.Form.get("password").hasError("required"))),e.xp6(4),e.Q6J("ngClass",e.VKq(9,p,r.success)))},dependencies:[c.mk,m.rH,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u],styles:["#login[_ngcontent-%COMP%]{height:100vh;min-height:400px;display:flex;align-items:center;overflow:auto;background-color:#e5a600;background:linear-gradient(to right,#686868,#351805)}#login[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]{min-height:100vh}#login[_ngcontent-%COMP%]   .bg-image[_ngcontent-%COMP%]{background:linear-gradient(to bottom,rgba(0,0,0,.1019607843),rgba(0,0,0,.6509803922)),url(/assets/images/jpg/login-bg.jpg);background-size:cover;background-position:center}#login[_ngcontent-%COMP%]   .login-heading[_ngcontent-%COMP%]{font-weight:300}#login[_ngcontent-%COMP%]   .btn-login[_ngcontent-%COMP%]{font-size:.9rem;letter-spacing:.05rem;padding:.75rem 1rem}@supports (-ms-ime-align: auto){#login[_ngcontent-%COMP%]   .form-label-group[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{display:none}#login[_ngcontent-%COMP%]   .form-label-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-ms-input-placeholder{color:#777}}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){#login[_ngcontent-%COMP%]   .form-label-group[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{display:none}#login[_ngcontent-%COMP%]   .form-label-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-ms-input-placeholder{color:#777}}"]})}return o})()}];let a=(()=>{class o{static#t=this.\u0275fac=function(t){return new(t||o)};static#e=this.\u0275mod=e.oAB({type:o});static#n=this.\u0275inj=e.cJS({imports:[m.Bz.forChild(l),m.Bz]})}return o})(),n=(()=>{class o{static#t=this.\u0275fac=function(t){return new(t||o)};static#e=this.\u0275mod=e.oAB({type:o});static#n=this.\u0275inj=e.cJS({imports:[c.ez,a,i.UX]})}return o})()},632:(b,h,s)=>{s.d(h,{K:()=>f});var c=s(5861),m=s(9862),i=s(7398),e=s(1631),d=s(9468),C=s(6257);let f=(()=>{class p{constructor(l,a){this.Http=l,this.CF=a,this.prodUrl="https://squad-api-dev.azurewebsites.net/api",this.WebApi=this.prodUrl}Login(l,a){var n=this;return(0,c.Z)(function*(){try{return new Promise(o=>{const u="grant_type=password&username="+l+"&password="+a+"&role=2",t=(new m.WM).set("Content-Type","application/x-www-form-urlencoded;");return n.Http.post("https://squad-auth-dev.azurewebsites.net/connect/token",u,{headers:t,responseType:"json"}).pipe((0,i.U)(r=>(n.CF.SetLS$(n.CF.Token,JSON.stringify(n.CF.Encrypt(r,n.CF.Token))),r)),(0,e.z)(()=>n.Http.get(`${n.prodUrl}/GetUserDetailsByToken`)),(0,i.U)(r=>r&&200===r.Code?{status:!0,data:r.Data}:{status:!1,error:r.Message?r.Message:"Something went wrong"})).subscribe(r=>o(r),r=>o({status:!1,error:"Something went wrong"}))})}catch(o){console.log(o)}})()}getApis(l,a=!0){var n=this;return(0,c.Z)(function*(){try{return new Promise(function(){var o=(0,c.Z)(function*(g){return n.Http.get(`${n.WebApi}/${l}`,{params:(new m.LE).set("cache",a),responseType:"json"}).pipe((0,i.U)(t=>t&&200===t.Code?{status:!0,data:t}:{status:!1,error:t.Message?t.Message:"Something went wrong"})).subscribe({next:t=>g(t),error:t=>{if(401===t.status)return n.CF.GotoURL("/"),n.CF.SetLS$(n.CF.Token,JSON.stringify(null)),n.CF.SetLS$(n.CF.TokenUser,JSON.stringify(null)),void n.CF.SwalError("Session Expired","Error!");console.log(t?.error);const r=t?.error?.Message?t?.error.Message:"Something went wrong";return n.CF.SwalError(r,"Oops!"),g({status:!1,error:r})}})});return function(g){return o.apply(this,arguments)}}())}catch(o){console.log(o)}})()}postApis(l,a){var n=this;return(0,c.Z)(function*(){try{return new Promise(function(){var o=(0,c.Z)(function*(g){return n.Http.post(`${n.WebApi}/${l}`,a).pipe((0,i.U)(t=>t&&200===t.Code?{status:!0,data:t}:{status:!1,error:t.Message?t.Message:"Something went wrong"})).subscribe({next:t=>g(t),error:t=>{if(401===t.status)return n.CF.GotoURL("/"),n.CF.SetLS$(n.CF.Token,JSON.stringify(null)),n.CF.SetLS$(n.CF.TokenUser,JSON.stringify(null)),void n.CF.SwalError("Session Expired","Error!");console.log(t?.error);const r=t?.error?.Message?t?.error.Message:"Something went wrong";return n.CF.SwalError(r,"Oops!"),g({status:!1,error:r})}})});return function(g){return o.apply(this,arguments)}}())}catch(o){console.log(o)}})()}putApis(l,a){var n=this;return(0,c.Z)(function*(){try{return new Promise(function(){var o=(0,c.Z)(function*(g){return n.Http.put(`${n.WebApi}/${l}`,a).pipe((0,i.U)(t=>t&&200===t.Code?{status:!0,data:t}:{status:!1,error:t.Message?t.Message:"Something went wrong"})).subscribe({next:t=>g(t),error:t=>{if(401===t.status)return n.CF.GotoURL("/"),n.CF.SetLS$(n.CF.Token,JSON.stringify(null)),n.CF.SetLS$(n.CF.TokenUser,JSON.stringify(null)),void n.CF.SwalError("Session Expired","Error!");console.log(t?.error);const r=t?.error?.Message?t?.error.Message:"Something went wrong";return n.CF.SwalError(r,"Oops!"),g({status:!1,error:r})}})});return function(g){return o.apply(this,arguments)}}())}catch(o){console.log(o)}})()}getAPI(l){return this.Http.get(`${this.WebApi}/${l}`,{responseType:"json"})}static#t=this.\u0275fac=function(a){return new(a||p)(d.LFG(m.eN),d.LFG(C.v))};static#e=this.\u0275prov=d.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}return p})()}}]);